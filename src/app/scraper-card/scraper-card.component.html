<div class="card">
  <div class="card-image">
    <div class="carousel-container">
      <button class="prev-btn" (click)="prevImage()" aria-label="Imagen anterior">
        <i class="fas fa-chevron-left"></i>
      </button>
      <div class="carousel-image">
        <img [src]="currentImage" alt="propiedad" class="card-img-top" loading="eager"
          [class.slide-left]="animationDirection === 'left'" [class.slide-right]="animationDirection === 'right'"
          (load)="onImageLoad()" (error)="onImageError()" (animationend)="resetAnimation()" />
      </div>
      <button class="next-btn" (click)="nextImage()" aria-label="Imagen siguiente">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>

    <div class="card-badge">
      <span>{{data.daysPublished}}</span>
    </div>

    <button class="card-favorite" *ngIf="imageLoaded" (click)="toggleFavorite()" (keydown.enter)="toggleFavorite()"
      [attr.aria-label]="isFavorited ? 'Quitar de favoritos' : 'Añadir a favoritos'">
      <i [ngClass]="isFavorited ? 'fas fa-heart' : 'far fa-heart'" aria-hidden="true"
        [attr.title]="isFavorited ? 'Quitar de favoritos' : 'Añadir a favoritos'">
      </i>
    </button>

  </div>

  <div class="card-body">
    <h5 class="card-title">{{ data.price }}</h5>
    <h6 class="card-subtitle">{{ data.titleTypeSupProperty }}</h6>
    <div class="card-details">
      <p><i class="fas fa-money-bill-wave"></i> {{ data.expenses }}</p>
      <p><i class="fas fa-map-marker-alt"></i> {{ data.location }}</p>
    </div>
    <div class="card-views">
      <p><i class="fas fa-eye"></i> {{data.views}}</p>
    </div>
    <a [href]="data.href" class="btn btn-primary" target="_blank" rel="noopener noreferrer">Ver Propiedad</a>
  </div>
</div>